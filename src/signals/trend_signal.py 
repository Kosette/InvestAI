from signals.base import BaseSignal, SignalResult


class TrendSignal(BaseSignal):

    def evaluate(self, symbol: str, context: dict) -> SignalResult:
        market = context["market"]

        ma20 = market["ma20"]
        ma60 = market["ma60"]
        price = market["price"]

        triggered = price > ma20 > ma60

        return SignalResult(
            triggered=triggered,
            score=0.8 if triggered else 0.0,
            reason={
                "price": price,
                "ma20": ma20,
                "ma60": ma60,
                "logic": "价格在多头趋势结构中"
            }
        )
